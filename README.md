# eShop - Микросервисная система электронного магазина

Проект eShop представляет собой микросервисную архитектуру для электронного магазина, состоящую из нескольких сервисов и необходимой инфраструктуры.

## Архитектура системы

Система состоит из следующих компонентов:

- **ApiGateway** - API шлюз для маршрутизации запросов к внутренним сервисам
- **OrdersService** - Сервис для работы с заказами
- **PaymentsService** - Сервис для обработки платежей 
- **Shared.Contracts** - Общие контракты для межсервисного взаимодействия
- **Shared.Infrastructure** - Общая инфраструктурная логика

## Технологии

- ASP.NET Core 9
- Entity Framework Core для работы с базами данных
- Kafka для обмена сообщениями между сервисами (с поддержкой exactly-once доставки)
- PostgreSQL в качестве основной базы данных
- Redis (Garnet) для кеширования
- Docker для контейнеризации

## Запуск проекта с помощью Docker Compose

Для запуска всей системы с необходимой инфраструктурой используйте Docker Compose:

```bash
docker compose up -d
```

### Сервисы и порты

После запуска будут доступны следующие сервисы:

- **API Gateway**: http://localhost:8000
- **Kafka UI**: http://localhost:8080
- **PostgreSQL**: localhost:5432
  - username: postgres
  - password: postgres
- **Redis**: localhost:6379

## Особенности реализации

### Работа с базой данных

- Entity Framework Core используется для доступа к базам данных
- Базы данных создаются автоматически при запуске сервисов (через EF Core)
- Для каждого сервиса используется своя отдельная база данных

### Обмен сообщениями через Kafka

- Реализована семантика exactly-once для гарантии обработки сообщений
- Используется паттерн Outbox для надежной публикации событий
- Используется паттерн Inbox для идемпотентной обработки событий

### Маршрутизация через API Gateway

- API Gateway маршрутизирует запросы к соответствующим внутренним сервисам
- Поддержка gRPC для высокопроизводительного межсервисного взаимодействия
- Поддержка WebSockets для real-time уведомлений через SignalR 